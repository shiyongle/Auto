<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="CL_ComplainEntry">

    <resultMap id="CL_ComplainEntryMap" type="com.pc.model.CL_ComplainEntry">
        <result property="fid" column="fid"/>
        <result property="fparentid" column="fparentid"/>
        <result property="fuserid" column="fuserid"/>
        <result property="famount" column="famount"/>
        <result property="ftype" column="ftype"/>
        <result property="fremark" column="fremark"/>
        <result property="fcreator" column="fcreator"/>    
        <result property="fcreateTime" column="fcreateTime"/>
    </resultMap>

	<!-- 用于select查询公用抽取的列 -->
	<sql id="columns">
	    <![CDATA[
        *
	    ]]>
	</sql>
	
    <insert id="insert" useGeneratedKeys="true" keyProperty="fid">
    <![CDATA[
        INSERT INTO cl_complain_entry(
			fid,                         
			fparentid,                    
			fuserid,           
			famount,               
			ftype,            
			fremark,                
			fcreator,           
			fcreateTime         
        ) VALUES (
	        #{fid,jdbcType=INTEGER},                         
			#{fparentid,jdbcType=INTEGER},                   
			#{fuserid,jdbcType=INTEGER},           
			#{famount,jdbcType=DECIMAL},               
			#{ftype,jdbcType=INTEGER},            
			#{fremark,jdbcType=VARCHAR}, 
			#{fcreator,jdbcType=INTEGER},           
			#{fcreateTime,jdbcType=TIMESTAMP}
        )
    ]]>
    </insert>

    <update id="update" >
    <![CDATA[
         UPDATE cl_complain_entry SET
			fid=#{fid,jdbcType=INTEGER},
			fparentid=#{fparentid,jdbcType=INTEGER},
			fuserid=#{fuserid,jdbcType=INTEGER},
			famount=#{famount,jdbcType=DECIMAL},
			ftype=#{ftype,jdbcType=INTEGER},
			fremark=#{fremark,jdbcType=VARCHAR},
			fcreator=#{fcreator,jdbcType=INTEGER},
			fcreateTime=#{fcreateTime,jdbcType=TIMESTAMP}
			WHERE fid = #{fid} 
    ]]>
    </update>

    <delete id="delete">
    <![CDATA[
        DELETE FROM cl_complain_entry WHERE
        fid = #{fid} 
    ]]>
    </delete>
    
    <select id="getById" resultMap="CL_ComplainEntryMap">
	    SELECT <include refid="columns"/>
	    <![CDATA[
	        FROM cl_complain_entry 
	        WHERE 
		        fid = #{fid} 
	    ]]>
    </select>
    
	<sql id="findWhere">
	    <where>
		   	<if test="@Ognl@isNotEmpty(forderId)">
		   	  	And forderId = #{forderId}
			</if>
	    </where>
	</sql>
	
	<select id="find" resultMap="CL_ComplainEntryMap">
	    SELECT <include refid="columns"/> FROM cl_complain_entry 
		<include refid="findWhere"/>
		<if test="@Ognl@isNotEmpty(sortColumns)">
			ORDER BY ${sortColumns}
		</if>
    </select>	
	 
    <select id="findPageCount" resultType="long">
        SELECT count(*) FROM cl_complain_entry 
        <include refid="findWhere"/>    
    </select>
    
    <select id="findPage" resultMap="CL_ComplainEntryMap">
    	SELECT <include refid="columns"/> FROM cl_complain_entry 
		<include refid="findWhere"/>
		ORDER BY fcreateTime DESC 
    </select>
    
</mapper>

